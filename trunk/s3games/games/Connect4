[BOARD]    
image=connect4board.png

[REALBOARD ELEMENT TYPES]
name=greenFrog
state=1
hueMin=71
hueMax=192
saturationMin=0.27
saturationMax=1.0
valueMin=0.09
valueMax=0.9
sizeMin=200
sizeMax=5000

name=redFrog
hueMin=337
hueMax=19
saturationMin=0.44
saturationMax=1.0
valueMin=0.28
valueMax=1.0
sizeMin=200
sizeMax=5000

[ELEMENT TYPES]
name=white
states=1
image=connect4white.png
point=1,1

name=red
states=1
image=connect4red.png
point=1,1


[LOCATION TYPES]

name=grid
image=emptyplace.png
shape=circle(22)
point=1,1

name=stackr
image=connect4grey.png
shape=circle(25)
point=1,1
relevant=no

name=stackw
image=connect4grey.png
shape=circle(25)
point=1,1
relevant=no

[LOCATIONS]

name=sw(1)
type=stackw
point=129,293
robot=10,20,30,40,50,10,20,30,40,50

name=sw(2)
type=stackw
point=129,293
robot=10,20,30,40,50,10,20,30,40,50

name=sw(3)
type=stackw
point=129,293
robot=10,20,30,40,50,10,20,30,40,50

name=sw(4)
type=stackw
point=129,293
robot=10,20,30,40,50,10,20,30,40,50

name=sw(5)
type=stackw
point=129,293
robot=10,20,30,40,50,10,20,30,40,50

name=sw(6)
type=stackw
point=129,293
robot=10,20,30,40,50,10,20,30,40,50

name=sw(7)
type=stackw
point=129,293
robot=10,20,30,40,50,10,20,30,40,50

name=sw(8)
type=stackw
point=129,293
robot=10,20,30,40,50,10,20,30,40,50

name=sw(9)
type=stackw
point=129,293
robot=10,20,30,40,50,10,20,30,40,50

name=sw(10)
type=stackw
point=129,293
robot=10,20,30,40,50,10,20,30,40,50

name=sw(11)
type=stackw
point=129,293
robot=10,20,30,40,50,10,20,30,40,50

name=sw(12)
type=stackw
point=129,293
robot=10,20,30,40,50,10,20,30,40,50

name=sw(13)
type=stackw
point=129,293
robot=10,20,30,40,50,10,20,30,40,50

name=sw(14)
type=stackw
point=129,293
robot=10,20,30,40,50,10,20,30,40,50

name=sw(15)
type=stackw
point=129,293
robot=10,20,30,40,50,10,20,30,40,50

name=sw(16)
type=stackw
point=129,293
robot=10,20,30,40,50,10,20,30,40,50

name=sw(17)
type=stackw
point=129,293
robot=10,20,30,40,50,10,20,30,40,50

name=sw(18)
type=stackw
point=129,293
robot=10,20,30,40,50,10,20,30,40,50

name=sr(1)
type=stackr
point=272,293
robot=10,20,30,40,50,10,20,30,40,50

name=sr(2)
type=stackr
point=272,293
robot=10,20,30,40,50,10,20,30,40,50

name=sr(3)
type=stackr
point=272,293
robot=10,20,30,40,50,10,20,30,40,50

name=sr(4)
type=stackr
point=272,293
robot=10,20,30,40,50,10,20,30,40,50

name=sr(5)
type=stackr
point=272,293
robot=10,20,30,40,50,10,20,30,40,50

name=sr(6)
type=stackr
point=272,293
robot=10,20,30,40,50,10,20,30,40,50

name=sr(7)
type=stackr
point=272,293
robot=10,20,30,40,50,10,20,30,40,50

name=sr(8)
type=stackr
point=272,293
robot=10,20,30,40,50,10,20,30,40,50

name=sr(9)
type=stackr
point=272,293
robot=10,20,30,40,50,10,20,30,40,50

name=sr(10)
type=stackr
point=272,293
robot=10,20,30,40,50,10,20,30,40,50

name=sr(11)
type=stackr
point=272,293
robot=10,20,30,40,50,10,20,30,40,50

name=sr(12)
type=stackr
point=272,293
robot=10,20,30,40,50,10,20,30,40,50

name=sr(13)
type=stackr
point=272,293
robot=10,20,30,40,50,10,20,30,40,50

name=sr(14)
type=stackr
point=272,293
robot=10,20,30,40,50,10,20,30,40,50

name=sr(15)
type=stackr
point=272,293
robot=10,20,30,40,50,10,20,30,40,50

name=sr(16)
type=stackr
point=272,293
robot=10,20,30,40,50,10,20,30,40,50

name=sr(17)
type=stackr
point=272,293
robot=10,20,30,40,50,10,20,30,40,50

name=b(1,1)
type=grid
point=50,36
robot=10,20,30,40,50,10,20,30,40,50

name=b(2,1)
type=grid
point=100,36
robot=10,20,30,40,50,10,20,30,40,50

name=b(3,1)
type=grid
point=150,36
robot=10,20,30,40,50,10,20,30,40,50

name=b(4,1)
type=grid
point=200,36
robot=10,20,30,40,50,10,20,30,40,50

name=b(5,1)
type=grid
point=250,36
robot=10,20,30,40,50,10,20,30,40,50

name=b(6,1)
type=grid
point=300,36
robot=10,20,30,40,50,10,20,30,40,50

name=b(7,1)
type=grid
point=350,36
robot=10,20,30,40,50,10,20,30,40,50

name=b(1,2)
type=grid
point=50,86
robot=10,20,30,40,50,10,20,30,40,50

name=b(2,2)
type=grid
point=100,86
robot=10,20,30,40,50,10,20,30,40,50

name=b(3,2)
type=grid
point=150,86
robot=10,20,30,40,50,10,20,30,40,50

name=b(4,2)
type=grid
point=200,86
robot=10,20,30,40,50,10,20,30,40,50

name=b(5,2)
type=grid
point=250,86
robot=10,20,30,40,50,10,20,30,40,50

name=b(6,2)
type=grid
point=300,86
robot=10,20,30,40,50,10,20,30,40,50

name=b(7,2)
type=grid
point=350,86
robot=10,20,30,40,50,10,20,30,40,50

name=b(1,3)
type=grid
point=50,136
robot=10,20,30,40,50,10,20,30,40,50

name=b(2,3)
type=grid
point=100,136
robot=10,20,30,40,50,10,20,30,40,50

name=b(3,3)
type=grid
point=150,136
robot=10,20,30,40,50,10,20,30,40,50

name=b(4,3)
type=grid
point=200,136
robot=10,20,30,40,50,10,20,30,40,50

name=b(5,3)
type=grid
point=250,136
robot=10,20,30,40,50,10,20,30,40,50

name=b(6,3)
type=grid
point=300,136
robot=10,20,30,40,50,10,20,30,40,50

name=b(7,3)
type=grid
point=350,136
robot=10,20,30,40,50,10,20,30,40,50

name=b(1,4)
type=grid
point=50,186
robot=10,20,30,40,50,10,20,30,40,50

name=b(2,4)
type=grid
point=100,186
robot=10,20,30,40,50,10,20,30,40,50

name=b(3,4)
type=grid
point=150,186
robot=10,20,30,40,50,10,20,30,40,50

name=b(4,4)
type=grid
point=200,186
robot=10,20,30,40,50,10,20,30,40,50

name=b(5,4)
type=grid
point=250,186
robot=10,20,30,40,50,10,20,30,40,50

name=b(6,4)
type=grid
point=300,186
robot=10,20,30,40,50,10,20,30,40,50

name=b(7,4)
type=grid
point=350,186
robot=10,20,30,40,50,10,20,30,40,50

name=b(1,5)
type=grid
point=50,236
robot=10,20,30,40,50,10,20,30,40,50

name=b(2,5)
type=grid
point=100,236
robot=10,20,30,40,50,10,20,30,40,50

name=b(3,5)
type=grid
point=150,236
robot=10,20,30,40,50,10,20,30,40,50

name=b(4,5)
type=grid
point=200,236
robot=10,20,30,40,50,10,20,30,40,50

name=b(5,5)
type=grid
point=250,236
robot=10,20,30,40,50,10,20,30,40,50

name=b(6,5)
type=grid
point=300,236
robot=10,20,30,40,50,10,20,30,40,50

name=b(7,5)
type=grid
point=350,236
robot=10,20,30,40,50,10,20,30,40,50

[PLAYER NAMES]
1=white
2=red

[MOVABLE ELEMENTS]
            
name=w(1)
type=white
location=sw(1)

name=w(2)
type=white
location=sw(2)

name=w(3)
type=white
location=sw(3)

name=w(4)
type=white
location=sw(4)

name=w(5)
type=white
location=sw(5)

name=w(6)
type=white
location=sw(6)

name=w(7)
type=white
location=sw(7)

name=w(8)
type=white
location=sw(8)

name=w(9)
type=white
location=sw(9)

name=w(10)
type=white
location=sw(10)

name=w(11)
type=white
location=sw(11)

name=w(12)
type=white
location=sw(12)

name=w(13)
type=white
location=sw(13)

name=w(14)
type=white
location=sw(14)

name=w(15)
type=white
location=sw(15)

name=w(16)
type=white
location=sw(16)

name=w(17)
type=white
location=sw(17)

name=w(18)
type=white
location=sw(18)

name=r(1)
type=red
location=sr(1)

name=r(2)
type=red
location=sr(2)

name=r(3)
type=red
location=sr(3)

name=r(4)
type=red
location=sr(4)

name=r(5)
type=red
location=sr(5)

name=r(6)
type=red
location=sr(6)

name=r(7)
type=red
location=sr(7)

name=r(8)
type=red
location=sr(8)

name=r(9)
type=red
location=sr(9)

name=r(10)
type=red
location=sr(10)

name=r(11)
type=red
location=sr(11)

name=r(12)
type=red
location=sr(12)

name=r(13)
type=red
location=sr(13)

name=r(14)
type=red
location=sr(14)

name=r(15)
type=red
location=sr(15)

name=r(16)
type=red
location=sr(16)

name=r(17)
type=red
location=sr(17)


[EXPRESSIONS]

CheckMove
  $N = ($M + 1)
  ($M == 5) OR NOT EMPTY("b($L,$N)")
END

SameElementType
  ELTYPE(CONTENT("b($X,$Y)")) == $TP
  $CNT = ($CNT + 1)
  $X = ($X + $DX)
  $Y = ($Y + $DY)
END

Count($DX,$DY)
  $X = ($L + $DX)
  $Y = ($M + $DY)
  $CNT = 0
  FORALL($A,1,3,SameElementType) OR true
  $CNT         
END

Row4
  (Count(-1,0) + Count(1,0)) >= 3
END

Col4
  (Count(0,-1) + Count(0,1)) >= 3
END

Diag4
  (Count(-1,-1) + Count(1,1)) >= 3
END

RDiag4
  (Count(-1,1) + Count(1,-1)) >= 3
END

Has4
  $TP = ELTYPE(CONTENT("b($L,$M)"))
  Row4 OR Col4 OR Diag4 OR RDiag4
END

[SCORINGS]

[END OF GAME]

situation=Has4
winner=(3-PLAYER)

[GAME RULES]
 
name=wstep
element=w($J)
player=1
from=sw($K)
to=b($L,$M)
condition=CheckMove
followup=NEXTPLAYER

name=rstep
element=r($J)
player=2
from=sr($K)
to=b($L,$M)  
condition=CheckMove
followup=NEXTPLAYER